{% extends "base.html" %}

{% block content %}

<h1 style="margin-bottom: 20px;">ðŸ“š Book List</h1>

<a href="{{ url_for('add_book') }}">
    <button class="btn-add">+ Add Book</button>
</a>

<hr style="margin: 20px 0;">

{% if books %}
    <div class="book-list">
        {% for book in books %}
            <div class="book-card">
                <div class="book-info">
                    <strong>{{ book.title }}</strong>
                    <p>Author: {{ book.author }}</p>

                    {% if current_user.has_roles(["admin"]) %}
                        <p class="owner-text">
                            Added by: {{ book.owner.username }}
                        </p>
                    {% endif %}
                </div>

                <div class="book-actions">
                    <a href="{{ url_for('edit_book', book_id=book.id) }}">
                        <button class="btn-edit">Edit</button>
                    </a>

                    <form action="{{ url_for('delete_book', book_id=book.id) }}" 
                          method="POST">
                        <button class="btn-delete"
                                onclick="return confirm('Are you sure you want to delete this book?')">
                            Delete
                        </button>
                    </form>
                </div>
            </div>
        {% endfor %}
    </div>
{% else %}
    <p>No books available.</p>
{% endif %}

<style>
    .btn-add {
        background-color: #28a745;
        color: white;
        padding: 8px 15px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-weight: bold;
    }

    .btn-edit {
        background-color: #007bff;
        color: white;
        padding: 6px 12px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }

    .btn-delete {
        background-color: #dc3545;
        color: white;
        padding: 6px 12px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }

    .btn-edit:hover,
    .btn-delete:hover,
    .btn-add:hover {
        opacity: 0.8;
    }

    .book-list {
        display: flex;
        flex-direction: column;
        gap: 15px;
    }

    .book-card {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px;
        background: #f9f9f9;
        border-radius: 8px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    .book-info p {
        margin: 3px 0;
    }

    .owner-text {
        color: gray;
        font-size: 14px;
    }

    .book-actions {
        display: flex;
        gap: 10px;
    }

    form {
        margin: 0;
    }
</style>

{% endblock %}