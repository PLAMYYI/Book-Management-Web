{% extends "base.html" %}

{% block content %}
<h1>Book List</h1>

<a href="{{ url_for('add_book') }}">
    <button>Add Book</button>
</a>

<ul>
    {% for book in books %}
        <li>
            {{ book.title }} - {{ book.author }}

            {% if current_user.has_roles(["admin"]) %}
                <span style="color: gray;">
                    (Added by: {{ book.owner.username }})
                </span>
            {% endif %}

            <!-- ปุ่ม Edit -->
            <a href="{{ url_for('edit_book', book_id=book.id) }}">
                <button>Edit</button>
            </a>

            <!-- ปุ่ม Delete -->
            <form action="{{ url_for('delete_book', book_id=book.id) }}" 
                  method="POST" 
                  style="display:inline;">
                <button type="submit" onclick="return confirm('Are you sure?')">
                    Delete
                </button>
            </form>

        </li>
    {% endfor %}
</ul>

{% endblock %}